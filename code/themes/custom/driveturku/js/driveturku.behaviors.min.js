!function(a){Drupal.theme.prototype.driveturkuExampleButton=function(b,c){return a('<a href="'+b+'" title="'+c+'">'+c+"</a>")},Drupal.behaviors.driveturkuMasonry={attach:function(b){a(".liftup-box-list",b).each(function(b,c){var d=a(c);a(window).load(function(){d.once("driveturku-masonry",function(){var b=new Masonry(d[0],{columnWidth:".liftup-box",itemSelector:".liftup-box"}),c=d.parents(".quicktabs-tabpage:first");if(1===c.length){var e=c.attr("id").replace(/tabpage/,"tab");a("#"+e).bind("click",function(){imagesLoaded(c,function(){b.layout()})})}a(".font-zoom-level-changer span").click(function(){b.layout()})})})})}},Drupal.behaviors.driveturkuQuicktabs={attach:function(){a(".quicktabs-wrapper").once("quicktabs-behavior",function(){var b=a(this).find(".quicktabs-tabs > li:not(.qt-hidden)");0===b.length&&a(this).addClass("quicktabs-empty")})}};var b=function(){if(!a(this).data("mobile-menu-initialized")){var b=a(this).find("div.responsified li.is-expanded");b.each(function(){a(this).hasClass("is-active-trail")||(a(this).removeClass("is-expanded"),a(this).addClass("is-collapsed")),a(this).hasClass("is-active-trail")&&a(this).children("ul.menu").addClass("is-visible")});var c=a(this).find("div.responsified li .menu");c.each(function(){a(this).hasClass("is-visible")||a(this).addClass("is-hidden")});var d=a("div.l-navigation").find("div.responsive-menus");a(".toggler").on("click.responsive-menu-toggle",function(){var b=a(this).parents(".responsive-menus:first");d.not(b).removeClass("responsive-toggled"),a(".recommended-block.is-visible").removeClass("is-visible")}),a("span.menu__item--expanded-toggle").on("click.submenu-toggle",function(b){b.preventDefault(),b.stopPropagation(),a(this).siblings("ul.menu").toggleClass("is-visible is-hidden"),a(this).parent().toggleClass("is-expanded is-collapsed")}),a(this).data("mobile-menu-initialized",!0)}},c=function(){if(a(this).data("mobile-menu-initialized")){a(this).find("div.responsive-toggled").length&&a(this).find("div.responsive-toggled > .toggler").trigger("click"),a(this).find("li.is-expanded:not(.is-active-trail)").toggleClass("is-expanded is-collapsed").find("ul.menu.is-visible").toggleClass("is-visible is-hidden"),a(this).find("li.menu__item--first-level.is-collapsed").toggleClass("is-expanded is-collapsed"),a(this).find("span.menu__item--expanded-toggle").off("click.submenu-toggle"),a(this).find(".toggler").off("click.responsive-menu-toggle");var b=a(this).find("div.responsive-menus li .menu");b.each(function(){a(this).hasClass("is-visible")||a(this).removeClass("is-hidden")});var c=a(this).find("div.responsive-menus li.is-expanded");c.each(function(){a(this).hasClass("is-active-trail")||(a(this).addClass("is-expanded"),a(this).removeClass("is-collapsed")),a(this).hasClass("is-active-trail")&&a(this).children("ul.menu").removeClass("is-visible")}),a(this).data("mobile-menu-initialized",!1)}},d=function(d){var e=a(".l-region--navigation .block--menu-block",d);a(window).width()>="946"?c.call(e):b.call(e)};if(Drupal.behaviors.driveturkuMainMenuBehavior={attach:function(a){d(a)}},Drupal.behaviors.driveturkuEqualHeightsBehavior={attach:function(b){a(window).load(function(){function c(){e!==!1&&(d(b),a(window).width()>="946"&&a(".l-footer .menu-block-wrapper > .menu").each(function(){var b=0;a(".menu__item--first-level",this).each(function(){a(this).height()>b&&(b=a(this).height())}),a(".menu__item--first-level",this).height(b)}),a(".l-region--navigation .menu__item--first-level.is-active-trail").hover(function(){var b=a(this).find("> .menu"),c=b.find("li.is-active-trail > .menu"),d=0,e=b.outerHeight(),f=c.outerHeight();a(window).width()>="946"&&(d=e>f?e:f,b.css("height",d),c.css("height",d))}),a(".l-region--navigation .menu__item--second-level").hover(function(){var b=a(this).parent(),c=a(this).find("> .menu"),d=0,e=b.outerHeight(),f=c.outerHeight();a(window).width()>="946"&&(d=f>e?f:e,c.css("height",d),b.css("height",d))}),a(window).width()>="946"&&a(".l-region--navigation .menu").css("height",""),a(".l-region--navigation .menu__item--first-level:not(.is-active-trail) .menu__item--second-level").hover(function(b){var c=a(this).parent(),d=c.find("> .menu");"mouseleave"===b.type&&(c.css("height",""),d.css("height",""))}),a(".l-region--navigation .menu__item--first-level.is-active .menu__item--second-level").hover(function(b){var c=a(this).parent(),d=c.find("> .menu");"mouseleave"===b.type&&(c.css("height",""),d.css("height",""))}),e=!1)}var e=!0;setInterval(function(){e=!0},33),a(window).resize(c),c()})}},Drupal.behaviors.driveturkuToolsToggle={attach:function(b){a(".toggle-tools",b).once("tools-toggle",function(){a(this).click(function(){a(this).parent().toggleClass("open")})})}},Drupal.behaviors.driveturkuTopMenuMobile={attach:function(b){a(".responsive-menus-0-0 > ul.menu",b).once("top-menu-mobile",function(){a(this).append(a(".l-region--navigation-top ul.menu > li").clone().addClass("menu__item--top-menu")),a(this).find(".menu__item--first-level > ul.menu").each(function(){var b=a(this),c=b.find(".menu__item--e-service a");if(c.parent().remove(),c.length){var d=a('<li class="e-service-wrapper"></li>').append(c);b.append(d)}})})}},Drupal.behaviors.driveturkuFontZoom={attach:function(){var b=[];a(".font-zoom-level-changer span").each(function(a,c){var d=c.className.match(/font-zoom-level--[a-z]+/);d&&b.push(d[0])});var c=localStorage["chosen.font.level"];if(c){var d=".font-zoom-level-changer span."+c;a("body").removeClass(b.join(" ")).addClass(c),a(".font-zoom-level-changer span.is-active").removeClass("is-active"),a(d).addClass("is-active")}a(".font-zoom-level-changer span").click(function(){a("body").removeClass(b.join(" ")).addClass(a(this).attr("class")),a(this).siblings().removeClass("is-active"),a(this).addClass("is-active"),localStorage["chosen.font.level"]=a(this).attr("class").split(" ")[0]})}},Drupal.behaviors.driveturkuLanguageSwitcher={attach:function(){a(".block--locale-language").once("language-switcher",function(){a(this).find(".menu--language-switcher").before('<span class="language-select">'+a(this).find(".menu__link.active").text()+"</span>"),a(this).find(".toggler").text(a(this).find(".menu__link.active").text()),a(function(){a(".language-select").click(function(){a(".menu--language-switcher").toggleClass("is-visible"),a(this).toggleClass("is-open")}),a(".menu--language-switcher a").click(function(){a(".language-select").text(a(this).text()),a(".block--locale-language .toggler").text(a(this).text()),a(".language-select").toggleClass("is-open"),a(".menu--language-switcher").toggleClass("is-visible")})})})}},Drupal.behaviors.driveturkuRecommendedToggle={attach:function(){a(".recommended-button, .recommended-block__close").once("recommended-toggle",function(){a(this).click(function(){a(".recommended-block").toggleClass("is-visible"),a(".responsive-menus.responsive-toggled")&&a(".responsive-menus.responsive-toggled").removeClass("responsive-toggled")})})}},Drupal.behaviors.driveturkuTableMobilize={attach:function(b){a(".node table",b).once("table-mobilize",function(){var b=a(this);b.find("thead th").each(function(c,d){var e=a(d).text();b.find("tbody tr td:nth-child("+(c+1)+")").attr("data-title",e)}),0!==b.find("thead").length?a(this).addClass("has-table-header"):a(this).addClass("has-no-table-header")})}},Drupal.behaviors.driveturkuEnhanceTaxonomyTermReferenceField={attach:function(b){a(".field-type-taxonomy-term-reference .form-type-checkboxes",b).once("enhance-taxonomy-term-reference-field",function(){function b(c){a(c).find(".taxonomy-level").filter(function(b,d){return a(d).data("taxonomy-level")>a(c).data("taxonomy-level")}).each(function(){a(this).append(a(this).nextUntil(".taxonomy-level-"+a(this).data("taxonomy-level"))),b(a(this))})}a(this).data({"taxonomy-level":-1}),b(a(this))})}},Drupal.behaviors.driveturkuEnhanceCheckboxes={attach:function(b){a(".form-type-checkbox",b).once("enhance-checkboxes",function(){var b=function(){a(this).is(":checked")?a(this).parent().addClass("is-checked"):a(this).parent().removeClass("is-checked")};a(this).find(".description").length&&a(this).addClass("has-description"),a(this).find(".form-checkbox").on("change",b).each(b)})}},Drupal.behaviors.driveturkuEnhanceRadioButtons={attach:function(b){a(".form-type-radio, .range-of-repeat .form-radios > div",b).once("enhance-radio-buttons",function(){var b=function(){a(this).is(":checked")&&(a(this).parent().addClass("is-checked"),a(this).parent().siblings(".is-checked").removeClass("is-checked"))};a(this).find(".description").length&&a(this).addClass("has-description"),a(this).find(".form-radio").on("change",b).each(b)})}},Drupal.behaviors.driveturkuEnhanceRangeOfRepeat={attach:function(b){a(".range-of-repeat .form-radios > div",b).once("enhance-range-of-repeat",function(){var b=a(this).find(".form-radio");a(this).find(".form-text").on("focus",function(){b.not(":checked")&&b.click()})})}},Drupal.behaviors.driveturkuExternalEventForm={attach:function(b){a(".l-content > .event-node-form, .l-content > .tkufi-event-ext-event-translations-form",b).once("external-event-form",function(){var b=[],c=3,d=a(this).find(".field-name-field-event-types");d.find(".taxonomy-level-0 > .form-type-checkbox > .form-checkbox").each(function(){a(this).on("click.event-hobby-mutex",function(){a(this).parent().parent().siblings().find(".is-checked > input").each(function(){a(this).prop("checked",!1).parent().removeClass("is-checked")})})}),d.find(".taxonomy-level-1 > .form-type-checkbox > .form-checkbox").each(function(){a(this).on("click.limit-selection",function(){if(a(this).is(":checked"))if(b.length<c)b.push(this.id);else{var d=b.shift();a("#"+d).prop("checked",!1).parent().removeClass("is-checked"),a("#"+d).parent().parent().find(".taxonomy-level-2 .is-checked > input").each(function(){a(this).prop("checked",!1).parent().removeClass("is-checked")}),b.push(this.id)}else b.splice(b.indexOf(this.id),1),a("#"+this.id).parent().parent().find(".taxonomy-level-2 .is-checked > input").each(function(){a(this).prop("checked",!1).parent().removeClass("is-checked")})})})})}},Drupal.behaviors.driveturkuQuickSearchToggle={attach:function(b){a(".block--tkufi-search-feature-quicksearch",b).once("quick-search-toggle",function(){var b=Drupal.t("Search the entire web service"),c=Drupal.t("Show quick search");a(this).find(".form-text").prop("placeholder",b),a(this).addClass("is-collapsed has-animated-height");var d=a("<div></div>").addClass("quick-search-toggler").prop("title",c),e=function(){a(".block--tkufi-search-feature-quicksearch").toggleClass("is-collapsed"),a(".block--tkufi-search-feature-quicksearch").hasClass("is-collapsed")||a(".block--tkufi-search-feature-quicksearch .form-text").focus()};d.on("click",e),a(".l-region--navigation").prepend(d)}),a(".block--tkufi-search-feature-quicksearch--2",b).once("quick-search-toggle",function(){var b=Drupal.t("Search the entire web service");a(this).find(".form-text").prop("placeholder",b)})}},Drupal.behaviors.driveturkuNewsArchiveLink={attach:function(b){a(".quicktabs-news-archive-link",b).once("news-archive-link",function(){a(this).removeClass("quicktabs-news-archive-link").unbind("click").parent().addClass("quicktabs-news-archive-link")})}},"undefined"!=typeof Drupal.behaviors.openlayers){var e,f,g=Drupal.behaviors.openlayers.attach;"function"==typeof g&&(Drupal.behaviors.openlayers.attach=function(b,c){e=b,f=c,a(".openlayers-map").parents(".event-tab-event_map.is-collapsed").length||g(b,c)})}Drupal.behaviors.driveturkuEventTabs={attach:function(b){a(".event-tabs-wrapper",b).once("event-tabs",function(){a(".quicktabs-tabs li a").on("click.change-tab",function(){var b=a(this).parent(),c=a(a(this).data("target"));b.hasClass("active")||(b.siblings(".active").removeClass("active"),b.addClass("active"),c.siblings(".is-expanded").removeClass("is-expanded").addClass("is-collapsed"),c.removeClass("is-collapsed").addClass("is-expanded")),a(this).hasClass("event_map")&&a(".event-tab-event_map .openlayers-map").once("quicktabs-openlayers-init",function(){g(e,f)})})})}},"undefined"!=typeof Drupal.search_api_ajax&&(Drupal.search_api_ajax.urlToState=function(b){var c=Drupal.search_api_ajax.getUrlState(b),d=b.split("?"),e=Drupal.search_api_ajax.readUrl(d[0]);"undefined"!=typeof e&&""!==e&&(c.path=decodeURIComponent(e)),c.path||(c.path="_"),a.bbq.pushState(c,2)}),Drupal.behaviors.driveturkuEventFilters={attach:function(b){a(".l-filters",b).each(function(){var c="object"==typeof b,d=-1!==window.location.hash.indexOf("#path=");if(!c||!d){var e=a(this),f=a(".l-filter-stage"),g=e.find(".filter"),h=function(){a(".l-filters, .event-tabs-wrapper .quicktabs_main").addClass("ajax-is-loading")},i=function(){a(".l-filters, .event-tabs-wrapper .quicktabs_main").removeClass("ajax-is-loading")};a(document).ajaxStart(h),a(document).ajaxStop(i);var j=function(a){e.data("current_facet","."+a)},k=function(){e.data("current_facet",!1)},l=function(){var b={facet:a(this),facetFilter:a(this).nextAll(".filter__content").filter(":first"),facetState:a(this).find(".filter__state .state"),facetName:a(this).attr("class").split(" ").filter(function(a){return 0===a.indexOf("filter--")})[0]};f.append(b.facetFilter),b.facetFilter.hide(),b.facetFilter.find(".facetapi-facetapi-calendar-links .leaf").hide(),s(b),t(b),e.data("current_facet")&&b.facet.is(e.data("current_facet"))&&p(b)},m=!1;a(window).off("scroll.flexslidersPaused"),a(window).on("scroll.flexslidersPaused",function(){a(window).scrollTop()<=a("#flexslider-1").offset().top?m&&!e.data("current_facet")&&o():a(window).scrollTop()>a("#flexslider-1").offset().top+a("#flexslider-1").height()&&n()});var n=function(){if(!m){var b="undefined"!=typeof a(".flexslider").flexslider;b&&(a(".flexslider").flexslider("pause"),m=!0)}},o=function(){a(".flexslider").flexslider("play"),m=!1},p=function(a){n(),r(),j(a.facetName),a.facet.addClass("is-expanded").removeClass("is-collapsed"),a.facetFilter.show()},q=function(a){a.facet.removeClass("is-expanded").addClass("is-collapsed"),a.facetFilter.hide(),k()},r=function(){g.each(function(){a(this).trigger("closeFilter")})},s=function(b){var c=b.facetFilter.find("a.facetapi-active");a.each(c,function(){var c=a("<span></span>"),d=a(this);c.text(d.find(".facet__title").text()).on("click",function(){d.click()}).appendTo(b.facetState),b.facet.addClass("has-state")})},t=function(a){a.facet.find(".filter__toggle").off("click.filter-toggle").on("click.filter-toggle",function(){a.facet.hasClass("is-collapsed")?p(a):q(a)}),a.facet.on("openFilter",function(){p(a)}),a.facet.on("closeFilter",function(){q(a)}),a.facetFilter.find(".close").on("click.filter-content-close",function(){q(a)})};e.find("a.facetapi-active").length&&a(".event-tab-event_mosaic").hasClass("is-expanded")&&a(".event-tabs-wrapper .quicktabs-tabs li:first").next().find("a").trigger("click"),g.filter(":first").addClass("first"),g.filter(":last").addClass("last"),g.each(l)}})}},Drupal.behaviors.driveturkuEventQuicksearch={attach:function(b){a(".turkucalendar .l-navigation-top",b).once("event-quick-search",function(){var b=Drupal.t("Search from events and hobbies"),c=a(this).find("#block-tkufi-events-base-feature-eventsearch");c.find(".form-text").prop("placeholder",b),a(this).find("#block-locale-language").insertAfter(c),a(this).find(".font-zoom-level-changer").insertAfter(c)})}},Drupal.behaviors.driveturkuEventFooter={attach:function(b){a(".turkucalendar .l-footer",b).once("event-footer",function(){var b=a('<div class="menu__item--event-add"></div>'),c=a(".l-header .menu__item--event-add > a").clone();b.append(c),a(this).find(".section-footer--item:nth-child(3) .field-content").prepend(b);var d=a(".l-header .site-name > a:first").clone();a(this).find(".section-footer--item:first .field-content").prepend(d);var e=a('<div class="l-after-footer"></div>');e.append(a(this).find(".section-footer--item").filter(function(a){return a>=3})),a(this).find(".l-after-footer-wrapper").append(e)})}},Drupal.behaviors.driveturkuSectionFooterContactInfo={attach:function(b){a(".l-region--footer",b).once("section-footer-contact-info",function(){var b=a(this).find(".contact-information"),c=b.parent().parent();a(this).find(".section-footer--item:first").append(b),c.remove()})}},Drupal.behaviors.driveturkuSearchFiltersMobile={attach:function(b){var c=[".page-search .l-region--sidebar-first",".page-event-search .l-region--sidebar-first",".page-services-map .l-region--sidebar-first"],d=c.join(", ");a(d,b).once("search-filters-mobile",function(){var b=a(this),c=a('<div class="search-toggle-filters is-hidden">'+Drupal.t("Show filters")+"</div>");b.before(c),b.find(".block--facetapi .block__title").each(function(){a(this).append('<span class="search-toggle-single-filter is-hidden"></span>')});var d=a(".search-toggle-single-filter");c.click(function(){b.toggleClass("is-hidden").toggleClass("is-visible"),c.toggleClass("open"),c.hasClass("open")?c.text(Drupal.t("Hide filters")):c.text(Drupal.t("Show filters"))}),d.click(function(){var b=a(this).parentsUntil(".l-region");a(this).toggleClass("open"),b.children(".block__content").toggleClass("is-hidden")}),a(window).load(function(){function e(){f!==!1&&(a(window).width()<="768"&&(b.addClass("is-hidden"),g===!1&&(b.find(".block--facetapi").each(function(){a(this).find(".block__content").addClass("is-hidden")}),g=!0),c.removeClass("is-hidden"),d.removeClass("is-hidden")),a(window).width()>"768"&&(g=!1,c.text(Drupal.t("Show filters")),b.removeClass("is-hidden").removeClass("is-visible"),c.removeClass("open"),d.removeClass("open"),c.removeClass("is-visible"),d.removeClass("is-visible"),c.addClass("is-hidden"),d.addClass("is-hidden"),b.find(".block--facetapi").each(function(){b.find(".block__content").removeClass("is-hidden")})),f=!1)}var f=!0,g=!1;setInterval(function(){f=!0},33),a(window).resize(e),e()})})}};var h=function(a,b,c,d){var e=a.find(".facet-collapsible-wrapper").get(0);if(e){var f=e.id;if(f=f.replace("facet-collapsible-",""),f=f.replace(/-/g,"_"),Drupal.settings.facetapi_collapsible[f]){var g=Drupal.settings.facetapi_collapsible[f][b]===c;g&&a[d]("expanded")}}};Drupal.behaviors.facetapiCollapsible={attach:function(){var b=0;a(".facet-collapsible-wrapper .facetapi-collapsible").once(function(){var c=a(this);a(".facetapi-active",this).size()>0?a(this).addClass("expanded active"):(h(c,"expand",1,"addClass"),a("h2",this).each(function(){a(this).click(function(){c.siblings(".facetapi-collapsible:not(.active)").each(function(){h(a(this),"keep_open",0,"removeClass")}),c.toggleClass("expanded")})}));var d=a.cookie("Facetapi.collapsible.expanded");d=a.parseJSON(d),d||(d={}),a(".facetapi-collapsible ul.facetapi-collapsible .item-list").once(function(){var b=a(this),c=b.closest(".facet-collapsible-wrapper");if(c){var e=c.attr("id");if(e=e.replace("facet-collapsible-",""),e=e.replace(/-/g,"_"),Drupal.settings.facetapi_collapsible[e]&&Drupal.settings.facetapi_collapsible[e].collapsible_children){var f=a(b.siblings(".facetapi-facet").get(0));a("a",f).each(function(){a(this).append('<span class="facetapi-collapsible-handle"></span>'),!d||!d[e]||d[e].indexOf(a(this).attr("href"))<0?a("ul",a(this).closest(".facetapi-facet").siblings(".item-list")).first().removeClass("expanded"):(a(this).closest(".block-facetapi.facetapi-collapsible").addClass("expanded"),a(".facetapi-collapsible-handle",this).addClass("expanded"))}).addClass("collapselink"),a("a.facetapi-active",a(this)).length&&a("ul",a(this).closest("div")).first().each(function(){a(this).addClass("expanded"),a("li.expanded .facetapi-collapsible-handle",this).addClass("expanded")}),a("a .facetapi-collapsible-handle",f).click(function(c){var g,h=a("ul",f.siblings(".item-list")).first(),i=a(this).closest("a");h.toggleClass("expanded"),d||(d={}),d[e]||(d[e]=[]),h.hasClass("expanded")?(a(this).addClass("expanded"),d[e].push(i.attr("href"))):(a(this).removeClass("expanded"),g=d[e].indexOf(i.attr("href")),-1!==g&&d[e].splice(g,1)),Drupal.settings.facetapi_collapsible[e].keep_open===!1&&a("ul",b.closest("li").siblings("li")).each(function(){a(this).removeClass("expanded"),a("a .facetapi-collapsible-handle",a(this).closest("li")).removeClass("expanded"),g=d[e].indexOf(a("a",a(this).closest("li")).attr("href")),-1!==g&&d[e].splice(g,1)}),a.cookie("Facetapi.collapsible.expanded",JSON.stringify(d),{path:Drupal.settings.basePath,expires:1}),c.preventDefault()})}}}),b+=1})}},Drupal.behaviors.befCollapsible={attach:function(b){a(".form-bef-checkboxes.block--facetapi",b).once("bef-collapsible",function(){var b=!1,c=a(this);a(".facetapi-active",this).size()>0&&c.addClass("expanded active"),a(".facetapi-facet > a",c).on("click",function(b){if(b.preventDefault(),b.stopPropagation(),!a(b.target).is(".facetapi-collapsible-handle")){var c=a(this).find("input"),d=c.is(":not(:checked)");d?(c.attr("checked","checked"),a(this).parentsUntil("li",".facetapi-inactive").removeClass("facetapi-inactive").addClass("facetapi-active"),a(this).removeClass("facetapi-inactive").addClass("facetapi-active")):(c.removeAttr("checked"),a(this).parentsUntil("li",".facetapi-active").removeClass("facetapi-active").addClass("facetapi-inactive"),a(this).removeClass("facetapi-active").addClass("facetapi-inactive"))}}),a("a .facetapi-collapsible-handle",c).click(function(c){var d=a(this).closest("a"),e=d.parent().next();e.toggleClass("expanded"),e.hasClass("expanded")?a(this).addClass("expanded"):a(this).removeClass("expanded"),b&&a("ul",e.closest("li").siblings("li")).each(function(){a(this).removeClass("expanded"),a("a .facetapi-collapsible-handle",a(this).closest("li")).removeClass("expanded")}),c.preventDefault()}),c.find(".item-list").once("bef-collapsible-list",function(){a("a.facetapi-active",a(this)).each(function(){a(this).parentsUntil(c,".item-list").each(function(){a(this).addClass("expanded"),a(this).prev().find(".facetapi-collapsible-handle").addClass("expanded")})})})})}}}(jQuery);